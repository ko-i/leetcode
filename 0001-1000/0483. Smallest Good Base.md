> https://leetcode-cn.com/problems/smallest-good-base/

``` rust
impl Solution {
    pub fn smallest_good_base(n: String) -> String {
        // æ€»å’Œä¸ºn, è¿›åˆ¶ä¸ºk, ç»“åˆå¥½è¿›åˆ¶(å…¨ä¸º1)çš„å®šä¹‰, å³:
        // å…¬å¼1: n = k^0 + k^1 + k^2 + ... + k^(m-1) + k^m
        // è¿™é‡Œè¦æ±‚æœ€å°å¥½è¿›åˆ¶ï¼Œå³è¦æ±‚kå€¼å°½å¯èƒ½å°ï¼Œä¹Ÿå³må€¼(è½¬æ¢åŽçš„'bit'ä½æ•°)å°½å¯èƒ½å¤§
        // ä¾ç…§ç­‰æ¯”æ•°åˆ—çš„å‰né¡¹å’Œå…¬å¼ï¼Œå…¬å¼1å¯åŒ–ä¸º:
        // n = (1 - k^(m+1)) / (1 - k)
        // åˆä¾ç…§é¢˜æ„ï¼Œk >= 2ï¼Œæ‰€ä»¥1-kä¸ä¸º0ï¼Œä¸Šå¼å¯ä»¥è½¬åŒ–ä¸º
        // => (1-k)*n = 1 - k^(m+1)
        // => k^(m+1) = kn - n + 1 < kn
        // => k^(m+1) < kn
        // =>     k^m < n
        // =>       m < logk(n)
        // è¿™é‡Œæˆ‘ä»¬å°±æ±‚å‡ºäº†mçš„ä¸Šç•Œm_max = logk(n): ä»¥kä¸ºåº•nçš„å¯¹æ•°
        // å¯¹æ•°å‡½æ•°éšåº•æ•°kå¢žå¤§è€Œå‡å°ï¼ŒéšçœŸæ•°nå¢žå¤§è€Œå¢žå¤§
        // è¿™æ—¶å€™æˆ‘ä»¬è¿˜ä¸ç¡®å®šå®škçš„å–å€¼ï¼Œä½†ä¾ç…§é¢˜æ„ï¼Œk>=2ï¼Œnæ˜¯ç»™å®šçš„å€¼ï¼Œæ‰€ä»¥å¯ä»¥å–k=2æ—¶å¾—åˆ°æœ¬é¢˜må€¼çš„æœ€å¤§ä¸Šç•Œ
        // m_max = log2(n)
        let n: i64 = n.parse().unwrap();
        for m in (2..=(n as f64).log2() as i64).rev() {
            // è¿™æ—¶æˆ‘ä»¬å°±æŠŠç­”æ¡ˆé™åˆ¶åœ¨ä¸€ä¸ªå¾ˆå°çš„èŒƒå›´å†…äº†[2, m_max]
            // åˆå› ä¸ºæˆ‘ä»¬æœ€ç»ˆæ‰€æ±‚kå€¼è¦å°½å¯èƒ½å°ï¼Œå³è¦æ±‚mçš„å€¼è¦å°½å¯èƒ½å¤§ï¼Œæ‰€ä»¥æˆ‘ä»¬å¾…ä¼šå„¿å¯ä»¥ä»Žå¤§åˆ°å°éåŽ†mçš„å€¼ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªç¬¦åˆè¦æ±‚çš„kå€¼å³è¿”å›ž
        
            // ä¸‹é¢è€ƒè™‘å¦‚ä½•å¯»æ‰¾ç¬¦åˆè¦æ±‚çš„kå€¼(å› ä¸ºæˆ‘ä»¬éåŽ†å¯èƒ½çš„må–å€¼ï¼Œæ‰€ä»¥ä¸‹é¢è¿™äº›æ­¥éª¤å¯ä»¥æŠŠmå½“æˆå·²çŸ¥é‡)
            // å…¬å¼1: n = k^0 + k^1 + k^2 + ... + k^(m-1) + k^m
            //    => n > k^m
            //    => k < n.sqrt(m)  (å¯¹nå¼€mæ–¹æ ¹)
            // å…¬å¼2(äºŒé¡¹å¼å®šç†)(å±•å¼€åŽçš„å…¬å¼çœç•¥äº†): 
            //        (k+1)^m = ... > k^0 + k^1 + ... + k^(m-1) + k^m = n
            //    =>  (k+1)^m > n
            //    =>      k+1 > n.sqrt(m) (å¯¹nå¼€mæ–¹æ ¹)
            // ç»¼ä¸Š:  k < n.sqrt(m) < k+1
            // è¿™é‡Œå°±é™åˆ¶ä½åœ¨å½“å‰nä¸Žmçš„å–å€¼æƒ…å†µä¸‹ï¼Œkå€¼åº”è¯¥ä¸ºint(n.sqrt(m))
            
            // é’ˆå¯¹æ¯ä¸ªmï¼Œè®¡ç®—å‡ºç›¸åº”çš„kå€¼:
            let k = (n as f64).powf(1.0 / m as f64) as i64;
            // è€Œå…·ä½“åˆ¤æ–­kå€¼æ˜¯å¦æ»¡è¶³æ¡ä»¶ï¼Œç”¨å…¬å¼1å³å¯
            if (0..=m).fold((0, 1), |(sum, mul), _| (sum + mul, mul * k)).0 == n {
                return k.to_string();
            }
        }
        
        // 0ms 100.00% 2.7MB 100.00% è€¶âœŒðŸ»ï¼
        // å¦‚æžœæœªæ‰¾åˆ°åˆé€‚çš„k
        (n-1).to_string()
    }
}
```